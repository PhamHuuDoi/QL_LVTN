extends ../../layouts/default.pug

block main
  .container-fluid.mt-3
    .d-flex.justify-content-between.align-items-center.mb-3
      h4.mb-0 THEO DÕI ĐIỂM HƯỚNG DẪN
      a.btn.btn-outline-success.btn-sm(href="/admin/theodoidiemhd/export")
        i.fas.fa-file-excel.me-1
        | Xuất Excel

    if rows.length
      .card
        .card-body.p-0
          .table-responsive
            table.table.table-bordered.table-sm.table-hover.mb-0(style="font-size: 0.9rem;")
              thead.table-dark
                tr
                  th.text-center(style="width: 80px") Nhóm
                  th.text-center(style="width: 100px") MSSV
                  th(style="min-width: 150px") Tên SV
                  th(style="min-width: 200px") Đề tài
                  th(style="min-width: 150px") GVHD
                  th.text-center(style="width: 100px") Điểm
                  th(style="min-width: 150px") Đề nghị
                  th.text-center(style="width: 80px") Hành động
              tbody
                each r in rows
                  tr
                    td.text-center
                      strong= r.group
                    td.text-center= r.mssv
                    td= r.ten
                    td
                      if r.detai
                        = r.detai
                      else
                        span.text-muted Chưa có đề tài
                    td= r.gvhd || "—"
                    td.text-center
                      if r.diem != null
                        span.badge.badge-sm= r.diem
                      else
                        span.badge.bg-secondary.badge-sm Chưa có
                    td
                      if r.denghi
                        if r.denghi.toLowerCase().includes('đạt') || r.denghi.toLowerCase().includes('tốt')
                          span.badge.bg-success.badge-sm= r.denghi
                        else if r.denghi.toLowerCase().includes('cần') || r.denghi.toLowerCase().includes('thiếu')
                          span.badge.bg-warning.badge-sm= r.denghi
                        else if r.denghi.toLowerCase().includes('không') || r.denghi.toLowerCase().includes('chưa')
                          span.badge.bg-danger.badge-sm= r.denghi
                        else
                          = r.denghi
                      else
                        span.text-muted —
                    td.text-center
                      a.btn.btn-outline-info.btn-sm(href=`/admin/theodoidiemhd/detail/${r.id}` style="padding: 0.2rem 0.5rem; font-size: 0.8rem;") Xem
    else
      .text-center.py-4
        p.text-muted.mb-0 Chưa có dữ liệu

  style.
    .table-responsive {
      overflow-x: auto;
      border-radius: 4px;
    }
    .table {
      width: 100%;
      margin-bottom: 0;
    }
    .table-sm th, .table-sm td {
      padding: 0.5rem 0.5rem;
      vertical-align: middle;
    }
    .table-dark th {
      background-color: #343a40;
      border-color: #454d55;
    }
    .badge-sm {
      font-size: 0.75rem;
      padding: 0.2rem 0.4rem;
    }
    .card {
      border: 1px solid #dee2e6;
      border-radius: 0.375rem;
    }
    .btn-sm {
      min-width: 60px;
    }
    .text-muted {
      color: #6c757d !important;
    }